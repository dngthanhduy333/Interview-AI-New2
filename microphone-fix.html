<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kh·∫Øc Ph·ª•c V·∫•n ƒê·ªÅ Microphone - InterviewPro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-lg shadow-lg p-8">
                <h1 class="text-3xl font-bold text-center mb-8">üîß Kh·∫Øc Ph·ª•c V·∫•n ƒê·ªÅ Microphone</h1>
                
                <div class="space-y-8">
                    <!-- URL Check -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-blue-800 mb-4">
                            <i data-feather="globe" class="inline mr-2"></i>
                            Ki·ªÉm tra URL
                        </h2>
                        <div id="urlStatus" class="text-blue-700">
                            <p class="mb-2">ƒêang ki·ªÉm tra URL hi·ªán t·∫°i...</p>
                        </div>
                    </div>

                    <!-- Browser Check -->
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-green-800 mb-4">
                            <i data-feather="chrome" class="inline mr-2"></i>
                            Ki·ªÉm tra tr√¨nh duy·ªát
                        </h2>
                        <div id="browserStatus" class="text-green-700">
                            <p class="mb-2">ƒêang ki·ªÉm tra tr√¨nh duy·ªát...</p>
                        </div>
                    </div>

                    <!-- Device Check -->
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-purple-800 mb-4">
                            <i data-feather="settings" class="inline mr-2"></i>
                            Ki·ªÉm tra thi·∫øt b·ªã
                        </h2>
                        <div id="deviceStatus" class="text-purple-700">
                            <p class="mb-2">ƒêang ki·ªÉm tra microphone...</p>
                        </div>
                        <button id="checkDevices" class="mt-4 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                            Ki·ªÉm tra l·∫°i thi·∫øt b·ªã
                        </button>
                    </div>

                    <!-- Permission Check -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-yellow-800 mb-4">
                            <i data-feather="shield" class="inline mr-2"></i>
                            Ki·ªÉm tra quy·ªÅn
                        </h2>
                        <div id="permissionStatus" class="text-yellow-700">
                            <p class="mb-2">ƒêang ki·ªÉm tra quy·ªÅn microphone...</p>
                        </div>
                        <button id="requestPermission" class="mt-4 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition">
                            Y√™u c·∫ßu quy·ªÅn microphone
                        </button>
                    </div>

                    <!-- Solutions -->
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">
                            <i data-feather="help-circle" class="inline mr-2"></i>
                            Gi·∫£i ph√°p
                        </h2>
                        <div class="space-y-4">
                            <div class="bg-white p-4 rounded-lg border">
                                <h3 class="font-semibold text-gray-800 mb-2">1. S·ª≠ d·ª•ng ƒë√∫ng URL</h3>
                                <p class="text-gray-600 text-sm mb-2">ƒê·∫£m b·∫£o truy c·∫≠p qua localhost:</p>
                                <code class="bg-gray-100 px-2 py-1 rounded text-sm">http://localhost:8000</code>
                                <p class="text-red-600 text-sm mt-1">‚ùå Kh√¥ng s·ª≠ d·ª•ng: http://127.0.0.1:8000</p>
                            </div>

                            <div class="bg-white p-4 rounded-lg border">
                                <h3 class="font-semibold text-gray-800 mb-2">2. C·∫•p quy·ªÅn microphone</h3>
                                <ul class="text-gray-600 text-sm space-y-1">
                                    <li>‚Ä¢ Nh·∫•p v√†o bi·ªÉu t∆∞·ª£ng üîí trong thanh ƒë·ªãa ch·ªâ</li>
                                    <li>‚Ä¢ Ch·ªçn "Cho ph√©p" cho microphone</li>
                                    <li>‚Ä¢ L√†m m·ªõi trang sau khi c·∫•p quy·ªÅn</li>
                                    <li>‚Ä¢ Ho·∫∑c v√†o chrome://settings/content/microphone</li>
                                </ul>
                            </div>

                            <div class="bg-white p-4 rounded-lg border">
                                <h3 class="font-semibold text-gray-800 mb-2">3. Ki·ªÉm tra thi·∫øt b·ªã</h3>
                                <ul class="text-gray-600 text-sm space-y-1">
                                    <li>‚Ä¢ K·∫øt n·ªëi microphone v√†o m√°y t√≠nh</li>
                                    <li>‚Ä¢ Ki·ªÉm tra microphone c√≥ ho·∫°t ƒë·ªông kh√¥ng</li>
                                    <li>‚Ä¢ Th·ª≠ microphone kh√°c n·∫øu c√≥</li>
                                    <li>‚Ä¢ Ki·ªÉm tra c√†i ƒë·∫∑t √¢m thanh trong h·ªá th·ªëng</li>
                                </ul>
                            </div>

                            <div class="bg-white p-4 rounded-lg border">
                                <h3 class="font-semibold text-gray-800 mb-2">4. Deploy l√™n hosting (Khuy·∫øn ngh·ªã)</h3>
                                <p class="text-gray-600 text-sm mb-2">Microphone ho·∫°t ƒë·ªông t·ªët h∆°n tr√™n HTTPS:</p>
                                <code class="bg-gray-100 px-2 py-1 rounded text-sm">npm install -g vercel && vercel</code>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 text-center space-y-4">
                    <a href="test-mic.html" class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition">
                        üé§ Test microphone
                    </a>
                    <div>
                        <a href="index.html" class="text-gray-600 hover:text-gray-800">
                            ‚Üê Quay l·∫°i ·ª©ng d·ª•ng ch√≠nh
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        feather.replace();
        
        // Check current URL
        const currentUrl = window.location.href;
        const urlStatus = document.getElementById('urlStatus');
        
        if (currentUrl.includes('localhost')) {
            urlStatus.innerHTML = `
                <div class="flex items-center">
                    <i data-feather="check-circle" class="text-green-600 mr-2"></i>
                    <span>‚úÖ URL ƒë√∫ng: ${currentUrl}</span>
                </div>
            `;
        } else if (currentUrl.includes('127.0.0.1')) {
            urlStatus.innerHTML = `
                <div class="flex items-center">
                    <i data-feather="x-circle" class="text-red-600 mr-2"></i>
                    <span>‚ùå URL sai: ${currentUrl}</span>
                </div>
                <p class="mt-2 text-sm">H√£y truy c·∫≠p: <strong>http://localhost:8000</strong></p>
            `;
        } else {
            urlStatus.innerHTML = `
                <div class="flex items-center">
                    <i data-feather="alert-circle" class="text-yellow-600 mr-2"></i>
                    <span>‚ö†Ô∏è URL kh√¥ng ph·∫£i localhost: ${currentUrl}</span>
                </div>
            `;
        }

        // Check browser
        const browserStatus = document.getElementById('browserStatus');
        const userAgent = navigator.userAgent;
        
        if (userAgent.includes('Chrome')) {
            browserStatus.innerHTML = `
                <div class="flex items-center">
                    <i data-feather="check-circle" class="text-green-600 mr-2"></i>
                    <span>‚úÖ Chrome - H·ªó tr·ª£ t·ªët</span>
                </div>
            `;
        } else if (userAgent.includes('Firefox')) {
            browserStatus.innerHTML = `
                <div class="flex items-center">
                    <i data-feather="check-circle" class="text-green-600 mr-2"></i>
                    <span>‚úÖ Firefox - H·ªó tr·ª£ t·ªët</span>
                </div>
            `;
        } else if (userAgent.includes('Edge')) {
            browserStatus.innerHTML = `
                <div class="flex items-center">
                    <i data-feather="check-circle" class="text-green-600 mr-2"></i>
                    <span>‚úÖ Edge - H·ªó tr·ª£ t·ªët</span>
                </div>
            `;
        } else {
            browserStatus.innerHTML = `
                <div class="flex items-center">
                    <i data-feather="alert-circle" class="text-yellow-600 mr-2"></i>
                    <span>‚ö†Ô∏è Tr√¨nh duy·ªát kh√¥ng x√°c ƒë·ªãnh</span>
                </div>
                <p class="mt-2 text-sm">Khuy·∫øn ngh·ªã s·ª≠ d·ª•ng Chrome, Firefox, ho·∫∑c Edge</p>
            `;
        }

        // Check devices
        const deviceStatus = document.getElementById('deviceStatus');
        const checkDevicesBtn = document.getElementById('checkDevices');
        
        async function checkDevices() {
            try {
                const devices = await navigator.mediaDevices.enumerateDevices();
                const audioDevices = devices.filter(device => device.kind === 'audioinput');
                
                if (audioDevices.length > 0) {
                    deviceStatus.innerHTML = `
                        <div class="flex items-center">
                            <i data-feather="check-circle" class="text-green-600 mr-2"></i>
                            <span>‚úÖ T√¨m th·∫•y ${audioDevices.length} microphone</span>
                        </div>
                        <ul class="mt-2 text-sm space-y-1">
                            ${audioDevices.map(device => `<li>‚Ä¢ ${device.label || 'Microphone kh√¥ng t√™n'}</li>`).join('')}
                        </ul>
                    `;
                } else {
                    deviceStatus.innerHTML = `
                        <div class="flex items-center">
                            <i data-feather="x-circle" class="text-red-600 mr-2"></i>
                            <span>‚ùå Kh√¥ng t√¨m th·∫•y microphone</span>
                        </div>
                        <p class="mt-2 text-sm">H√£y k·∫øt n·ªëi microphone v√†o m√°y t√≠nh</p>
                    `;
                }
            } catch (error) {
                deviceStatus.innerHTML = `
                    <div class="flex items-center">
                        <i data-feather="x-circle" class="text-red-600 mr-2"></i>
                        <span>‚ùå L·ªói ki·ªÉm tra thi·∫øt b·ªã</span>
                    </div>
                    <p class="mt-2 text-sm">${error.message}</p>
                `;
            }
        }
        
        checkDevicesBtn.addEventListener('click', checkDevices);
        checkDevices(); // Check on load

        // Check permission
        const permissionStatus = document.getElementById('permissionStatus');
        const requestPermissionBtn = document.getElementById('requestPermission');
        
        async function checkPermission() {
            try {
                const result = await navigator.permissions.query({ name: 'microphone' });
                
                if (result.state === 'granted') {
                    permissionStatus.innerHTML = `
                        <div class="flex items-center">
                            <i data-feather="check-circle" class="text-green-600 mr-2"></i>
                            <span>‚úÖ ƒê√£ c·∫•p quy·ªÅn microphone</span>
                        </div>
                    `;
                } else if (result.state === 'denied') {
                    permissionStatus.innerHTML = `
                        <div class="flex items-center">
                            <i data-feather="x-circle" class="text-red-600 mr-2"></i>
                            <span>‚ùå Microphone b·ªã t·ª´ ch·ªëi</span>
                        </div>
                        <p class="mt-2 text-sm">H√£y c·∫•p quy·ªÅn trong c√†i ƒë·∫∑t tr√¨nh duy·ªát</p>
                    `;
                } else {
                    permissionStatus.innerHTML = `
                        <div class="flex items-center">
                            <i data-feather="alert-circle" class="text-yellow-600 mr-2"></i>
                            <span>‚ö†Ô∏è Ch∆∞a c·∫•p quy·ªÅn microphone</span>
                        </div>
                        <p class="mt-2 text-sm">Nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ y√™u c·∫ßu quy·ªÅn</p>
                    `;
                }
            } catch (error) {
                permissionStatus.innerHTML = `
                    <div class="flex items-center">
                        <i data-feather="x-circle" class="text-red-600 mr-2"></i>
                        <span>‚ùå Kh√¥ng th·ªÉ ki·ªÉm tra quy·ªÅn</span>
                    </div>
                    <p class="mt-2 text-sm">${error.message}</p>
                `;
            }
        }
        
        requestPermissionBtn.addEventListener('click', async () => {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                stream.getTracks().forEach(track => track.stop());
                checkPermission();
            } catch (error) {
                console.error('Permission request failed:', error);
            }
        });
        
        checkPermission(); // Check on load
    </script>
</body>
</html> 